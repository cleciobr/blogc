<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gerador de Assinatura Shineray</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f9; display: flex; flex-direction: column; align-items: center; padding: 20px; }
        .editor-container { background: white; padding: 30px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); width: 100%; max-width: 1100px; }
        .preview-section { margin-bottom: 30px; border: 1px solid #ddd; padding: 10px; background: #fff; overflow-x: auto; }
        .controls-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .input-group { display: flex; flex-direction: column; }
        label { font-weight: bold; margin-bottom: 5px; color: #555; }
        input, select { padding: 10px; border: 1px solid #ccc; border-radius: 6px; font-size: 14px; }
        .button-group { display: flex; gap: 15px; margin-top: 20px; }
        button { padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-download { background-color: #C41219; color: white; }
        .btn-download:hover { background-color: #a00e14; }
        .btn-copy { background-color: #333; color: white; }
        .btn-copy:hover { background-color: #000; }
        
        #signature-preview {
            position: relative;
            width: 1024px;
            height: 171px;
            font-family: Arial, sans-serif;
            color: #333;
            overflow: hidden;
            user-select: none;
            background-color: white;
        }
        .bg-img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        .edit-layer { position: absolute; z-index: 2; display: flex; flex-direction: column; justify-content: center; }
        
        /* Nome e Cargo */
        .p-info { left: 150px; top: 75px; width: 350px; }
        .p-name { font-size: 24px; font-weight: bold; margin: 0; color: #000; text-transform: uppercase; line-height: 1; }
        .p-role { font-size: 16px; margin: 5px 0 0 0; color: #C41219; font-weight: normal; }
        
        /* Contatos */
        .c-info { left: 510px; top: 40px; width: 250px; font-size: 14px; color: #444; }
        .c-item { margin-bottom: 12px; display: flex; align-items: center; }
        
        /* Rodapé */
        .f-links { position: absolute; bottom: 5px; width: 100%; display: flex; justify-content: center; z-index: 3; font-size: 12px; font-weight: bold; color: #FFF; text-transform: uppercase; }
        .f-item { margin: 0 40px; }
    </style>
</head>
<body>

<div class="editor-container">
    <h2>Gerador de Assinatura de E-mail Shineray</h2>
    
    <div class="preview-section">
        <div id="signature-preview">
            <img src="assets/moldura1.png" class="bg-img" id="bg-display">
            
            <div class="edit-layer p-info">
                <div class="p-name" id="out-name">NOME DO COLABORADOR</div>
                <div class="p-role" id="out-role">Cargo / Departamento</div>
            </div>

            <div class="edit-layer c-info">
                <div class="c-item" style="margin-top: 5px;"><span id="out-loc">Cidade - UF</span></div>
                <div class="c-item" style="margin-top: 8px;"><span id="out-phone">(00) 00000-0000</span></div>
                <div class="c-item" style="margin-top: 10px;"><span id="out-email">email@shineray.com.br</span></div>
            </div>

            <div class="f-links">
                <div class="f-item"><span id="out-site">WWW.SHINERAYDOBRASIL.COM.BR</span></div>
                <div class="f-item"><span id="out-social">@SHINERAYDOBRASIL</span></div>
            </div>
        </div>
    </div>

    <div class="controls-grid">
        <div class="input-group">
            <label>Escolher Moldura</label>
            <select id="in-bg" onchange="updatePreview()">
                <option value="assets/moldura1.png">Modelo Padrão (Cinza/Vermelho)</option>
            </select>
        </div>
        <div class="input-group">
            <label>Nome Completo</label>
            <input type="text" id="in-name" placeholder="Ex: João Silva" oninput="updatePreview()">
        </div>
        <div class="input-group">
            <label>Cargo / Depto</label>
            <input type="text" id="in-role" placeholder="Ex: Gerente de Vendas" oninput="updatePreview()">
        </div>
        <div class="input-group">
            <label>Cidade - UF</label>
            <input type="text" id="in-loc" placeholder="Ex: Recife - PE" oninput="updatePreview()">
        </div>
        <div class="input-group">
            <label>Telefone</label>
            <input type="text" id="in-phone" placeholder="Ex: (81) 98888-7777" oninput="updatePreview()">
        </div>
        <div class="input-group">
            <label>E-mail</label>
            <input type="email" id="in-email" placeholder="Ex: joao@shineray.com.br" oninput="updatePreview()">
        </div>
    </div>

    <div class="button-group">
        <button class="btn-download" onclick="downloadImage()">Baixar como Imagem (PNG)</button>
        <button class="btn-copy" onclick="copyHTML()">Copiar Código HTML</button>
    </div>
    
    <div style="background: #fffbe6; border-left: 4px solid #ffe58f; padding: 15px; margin-top: 25px; border-radius: 4px;">
        <h4 style="margin-top: 0;">Como usar:</h4>
        <ol style="font-size: 14px; line-height: 1.6; margin-bottom: 0;">
            <li>Preencha os dados nos campos acima.</li>
            <li>A prévia será atualizada automaticamente.</li>
            <li>Clique em <strong>"Baixar como Imagem"</strong> para salvar e usar no Outlook/Gmail.</li>
            <li>Para adicionar novas molduras, coloque os arquivos na pasta <code>assets/</code> e edite o arquivo <code>index.html</code>.</li>
        </ol>
    </div>
</div>

<script>
    function updatePreview() {
        document.getElementById('bg-display').src = document.getElementById('in-bg').value;
        document.getElementById('out-name').innerText = document.getElementById('in-name').value || 'NOME DO COLABORADOR';
        document.getElementById('out-role').innerText = document.getElementById('in-role').value || 'Cargo / Departamento';
        document.getElementById('out-loc').innerText = document.getElementById('in-loc').value || 'Cidade - UF';
        document.getElementById('out-phone').innerText = document.getElementById('in-phone').value || '(00) 00000-0000';
        document.getElementById('out-email').innerText = document.getElementById('in-email').value || 'email@shineray.com.br';
    }

    function downloadImage() {
        const signature = document.getElementById('signature-preview');
        html2canvas(signature, { 
            scale: 2,
            useCORS: true,
            backgroundColor: null
        }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'assinatura-' + (document.getElementById('in-name').value || 'shineray') + '.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        });
    }

    function copyHTML() {
        const name = document.getElementById('out-name').innerText;
        const role = document.getElementById('out-role').innerText;
        const loc = document.getElementById('out-loc').innerText;
        const phone = document.getElementById('out-phone').innerText;
        const email = document.getElementById('out-email').innerText;
        
        // Caminho absoluto para a imagem de fundo (precisa ser uma URL pública para funcionar no e-mail)
        const bgUrl = window.location.origin + '/' + document.getElementById('in-bg').value;

        const htmlCode = `<!-- Início da Assinatura -->
<table cellpadding="0" cellspacing="0" border="0" style="width: 600px; font-family: Arial, sans-serif; background-color: #ffffff;">
    <tr>
        <td style="position: relative;">
            <img src="${bgUrl}" width="600" style="display: block; border: 0;" alt="Assinatura Shineray">
            <div style="position: absolute; top: 40%; left: 4%; width: 35%;">
                <div style="font-size: 16px; font-weight: bold; color: #000; text-transform: uppercase;">${name}</div>
                <div style="font-size: 11px; color: #C41219; margin-top: 2px;">${role}</div>
            </div>
            <div style="position: absolute; top: 22%; left: 50%; font-size: 10px; color: #444; line-height: 1.6;">
                <div style="margin-bottom: 8px;">${loc}</div>
                <div style="margin-bottom: 8px;">${phone}</div>
                <div>${email}</div>
            </div>
        </td>
    </tr>
</table>
<!-- Fim da Assinatura -->`;
        
        navigator.clipboard.writeText(htmlCode).then(() => {
            alert('Código HTML copiado! Lembre-se que para o HTML funcionar em e-mails externos, a imagem da moldura deve estar hospedada em um servidor público.');
        });
    }
</script>

</body>
</html>
