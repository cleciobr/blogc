
<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com" rel="stylesheet">
<!-- https://fonts.google.com/specimen/Montserrat -->

<style>
    /* Gotham Medium */
    .gotham-medium-alt {
        font-family: 'Montserrat', sans-serif;
        font-weight: 500;
    }

    /* Gotham Bold */
    .gotham-bold-alt {
        font-family: 'Montserrat', sans-serif;
        font-weight: 700;
    }
</style>
<style>
        body { font-family: 'Segoe UI' , Tahoma, Geneva, Verdana, sans-serif; background-color: #f4f4f9; display: flex; flex-direction: column; align-items: center; padding: 10px}
        .editor-container { background: white; padding: 10px; border-radius: 12px; box-shadow: 0 4px 20px rgba(0,0,0,0.1); width: 100%; max-width: 1100px; }
        .preview-section { margin-bottom: 30px; border: 1px solid #ddd; padding: 55px; background: #fff; overflow-x: auto; }
        .controls-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin-bottom: 20px; }
        .input-group { display: flex; flex-direction: column; }
        label { font-weight: bold; margin-bottom: 5px; color: #555; }
        input, select { padding: 10px; border: 1px solid #ccc; border-radius: 6px; font-size: 14px; }
        .button-group { display: flex; gap: 15px; margin-top: 20px; }
        button { padding: 12px 24px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; transition: 0.3s; }
        .btn-download { background-color: #C41219; color: white; }
        .btn-download:hover { background-color: #a00e14; }
        .btn-copy { background-color: #333; color: white; }
        .btn-copy:hover { background-color: #000; }
        
        #signature-preview {
            position: relative;
            width: 1024px;
            height: 171px;
            font-family: Arial, sans-serif;
            color: #333;
            overflow: hidden;
            user-select: none;
            background-color: white;
        }
        .bg-img { position: absolute; top: 0; left: 0; width: 100%; height: 100%; z-index: 1; }
        .edit-layer { position: absolute; z-index: 2; display: flex; flex-direction: column; justify-content: center;}
        
        /* Nome  */
        .p-info { top: 60px; width: 340px; }
        /* Cargo */
        .p-info-sub { top: 82px; width: 340px; text-align: left;}
        /* Nome  */
        .p-info2{ text-align: right; }
        /* Cargo */
        .p-info3{ text-align: right; }
        .p-name { font-size: 26px; margin: 0; color: #000; text-transform: capitalize; line-height: 1; font-weight: 700; font-family: 'Montserrat', sans-serif; ; white-space: nowrap;}
        .p-role { font-size: 20px; margin: 5px 0 0 0; font-weight: normal; font-weight: 550; ; white-space: nowrap;}
        
        /* Contatos */
        .c-info { left: 547px; top: 14px; width: 230px; font-size: 12px; color: #444; }
        .c-item { margin-bottom: 12px; display: flex; align-items: center; }
        .c-item-un { margin-bottom: 12px; display: flex; align-items: center; margin-top: 11px; white-space: nowrap;}
        .c-item-te { margin-bottom: 12px; display: flex; align-items: center; margin-top: 15px; padding-left: -5px; white-space: nowrap;}
        .c-item-ra { margin-bottom: 12px; display: flex; align-items: center; margin-top: -12px; padding-right: 15px; white-space: nowrap;}
        .c-item-cel { margin-bottom: 14px; display: flex; align-items: center; margin-top: -26px; padding-left: 73px; white-space: nowrap;}
        .c-item-em { margin-bottom: 14px; display: flex; align-items: center; margin-top: 6px;white-space: nowrap;}
        
        /* Rodapé */
        .f-links { position: absolute; bottom: 5px; width: 100%; display: flex; justify-content: center; z-index: 3; font-size: 12px; font-weight: bold; color: #FFF; text-transform: uppercase; }
        .f-item { margin: 0 40px; }

        .assi {
         margin-top: 10px;
         width: 15%;
         margin-left: 29rem;
        }
        .how-to-use{
            background: #fffbe6; border-left: 4px solid #ffe58f; padding: 15px; margin-top: 25px; border-radius: 4px;
        }
        .imgdownload{
            border-radius: 10px;
        }
        .page-footer {
                width: 100vw;
                position: relative;
                left: 50%;       
                right: 50%;
                margin-left: -50vw; 
                margin-right: -50vw;
                background-color: #333; 
                color: white;
            }
            .page-footer a {
                color: #fff;
            }

            .page-footer hr {
                border-top: 1px solid rgba(255,255,255,0.1);
            }
            
    </style>
    <link href="https://fonts.googleapis.com" rel="stylesheet">

    <title>Gerador de Assinatura Shineray</title>

<body>
    <div class="editor-container">
        <!-- <div>
            <div>
                <a href="/" class="btn btn-success"><i class="fa fa-arrow-circle-left"></i> Voltar ao intranet</a>
            </div>
            <img src="/res/site/img/sbm.png">
        </div> -->
        
      <img src="/res/site/img/shineray-motos-logo-01-small.png" class="assi" >
      <h2><center><strong>Gerador de Assinatura de E-mail </strong></center></h2>
        <div class="preview-section">
            <div id="signature-preview">
                <img src="/res/site/assinatura_shineray/img/Assinatura Não Preenchida Shineray.png" class="bg-img" id="bg-display">
                <div class="edit-layer p-info">
                    <div class="p-name p-info2" id="out-name">Nome</div></div>
                <div class="edit-layer p-info-sub">
                    <div class="p-role p-info3" id="out-role">Setor</div>
                </div>
                <div class="edit-layer c-info">
                    <div class="c-item-un"><span id="out-loc">Unidade</span></div>
                    <div class="c-item-te"><span id="out-phone">Telefone: (00) 00000-0000</span></div>
                    <div class="c-item-ra"><span id="out-ramal">Ramal:0000</span></div>
                    <div class="c-item-cel"><span id="out-cel">Celular: (00) 00000-0000</span></div>
                    <div class="c-item-em"><span id="out-email">email@shineraydobrasil.com.br</span></div>
                </div>
                <div class="f-links">
                    <div class="f-item"><span id="out-site"></span></div>
                    <div class="f-item"><span id="out-social"></span></div>
                </div>
            </div>
        </div>
        <form id="signature-form">
            <div class="controls-grid">
                    <div class="input-group">
                        <label>Escolher Moldura</label>
                        <select type="text" id="in-bg" oninput="updatePreview()" required>
                            <option value="">Selecione uma moldura</option>
                                <option value="assets/Assinatura Não Preenchida Shineray.png">Modelo Shineray (Vermelho)</option>
                                <option value="assets/Assinatura Não Preenchida BCI.png">Modelo BCI (Azul)</option>
                        </select>
                    </div>
                <div class="input-group">
                    <label>Nome do colaborador</label>
                    <input type="text" id="in-name" maxlength="22" placeholder="Ex: João Silva" oninput="updatePreview()" required>
                </div>
                <div class="input-group">
                    <label for="department">Setor</label>
                    <select required id="in-role" name="department" class="form-control" onchange="updatePreview()">
                        <option disabled selected value="">Escolha o Setor</option>
                        <option value="Marketing">Marketing</option>
                    </select>
                </div>
                <div class="input-group">
                                <label for="unit">Unidade: </label>
                                <select required type="text" 
                                id="in-loc" 
                                name="unit" 
                                class="form-control" oninput="updatePreview()">
                                <option disabled selected value="">Escolha a unidade</option>
                                <option value="Cabo de Santo Agostinho - Brasil">Cabo de Santo Agostinho - Brasil</option>
                    </select> 
                </div>
                <div class="input-group">
                    <label>Telefone</label>
                    <input type="text" id="in-phone" maxlength="25" value="Telefone: " placeholder="Ex: (81) 98888-7777" oninput="mascaraTelefone(this); updatePreview()" onfocus="if(this.value==='') this.value='Telefone: '">
                </div>
                <div class="input-group">
                    <label>Ramal</label>
                    <input type="text" id="in-ramal" maxlength="11" value="Ramal: " placeholder="Ramal: 7777" oninput="mascaraRamal(this); updatePreview()" onfocus="if(this.value==='') this.value='Ramal: '">
                </div>
                <div class="input-group">
                    <label>Celular</label>
                    <input type="text" id="in-cel" maxlength="24" value="Celular: " placeholder="Celular: (81) 98888-7777" oninput="mascaraCelular(this); updatePreview()" onfocus="if(this.value==='') this.value='Celular: '">
                </div>
                <div class="input-group">
                    <label>E-mail</label>
                    <input type="text" id="in-email" list="email-options" placeholder="nome@exemplo.com" oninput="sugerirDominios(this); updatePreview()" required>
                    <datalist id="email-options"></datalist>
                </div>
            </div>
        </form>
        <div class="button-group">
            <button class="btn-download imgdownload" onclick="downloadImage()">Baixar assinatura (PNG)</button>
            <!-- <button class="btn-copy" onclick="copyHTML()">Copiar Código HTML</button> -->
        </div>
        
        <div class="how-to-use" >
            <h4 style="margin-top: 0;">Como usar:</h4>
            <ol style="font-size: 14px; line-height: 1.6; margin-bottom: 0;">
                <li>Preencha os dados nos campos acima.</li>
                <li>A prévia será atualizada automaticamente.</li>
                <li>Clique em <strong>"Baixar como Imagem"</strong> para salvar e usar no Outlook/Gmail.</li>
                <!-- <li>Para adicionar novas molduras, coloque os arquivos na pasta <code>assets/</code> e edite o arquivo <code>index.html</code>.</li> -->
            </ol>
        </div>
    </div>
</body>
<script>
    function downloadImage() {
    const form = document.getElementById('signature-form');

    
    if (!form.reportValidity()) {
    
        return;
    }

}
</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
    function updatePreview() {
            const select = document.getElementById('in-bg');
            const roleInput = document.getElementById('in-role'); 
            const outRole = document.getElementById('out-role'); 
            

            const colorFromDb = select.options[select.selectedIndex].getAttribute('data-color') || '#e30613';

            document.getElementById('bg-display').src = select.value;
            document.getElementById('out-name').innerText = document.getElementById('in-name').value || 'Nome';
            document.getElementById('out-role').innerText = roleInput.value || 'Setor';
            document.getElementById('out-loc').innerText = document.getElementById('in-loc').value || 'Unidade';
            document.getElementById('out-phone').innerText = document.getElementById('in-phone').value || 'Telefone: (00) 00000-0000';
            document.getElementById('out-ramal').innerText = document.getElementById('in-ramal').value || 'Ramal: 0000';
            document.getElementById('out-cel').innerText = document.getElementById('in-cel').value || 'Celular: (00) 00000-0000';
            document.getElementById('out-email').innerText = document.getElementById('in-email').value || 'email@shineraydobrasil.com.br';


            if (select.value === "assets/Assinatura Não Preenchida BCI.png") {
                roleInput.style.setProperty('color', '#183e7a', 'important');
                roleInput.style.fontWeight = "bold";
                outRole.style.setProperty('color', '#183e7a', 'important');
            } else {
                roleInput.style.removeProperty('color');
                roleInput.style.fontWeight = "normal";
                
                outRole.style.color = colorFromDb;
            }
        }
    

    function downloadImage() {
        const signature = document.getElementById('signature-preview');
        html2canvas(signature, { 
            scale: 2,
            useCORS: true,
            backgroundColor: null
        }).then(canvas => {
            const link = document.createElement('a');
            link.download = 'assinatura-' + (document.getElementById('in-name').value || 'shineray') + '.png';
            link.href = canvas.toDataURL('image/png');
            link.click();
        });
    }

    function copyHTML() {
        const name = document.getElementById('out-name').innerText;
        const role = document.getElementById('out-role').innerText;
        const loc = document.getElementById('out-loc').innerText;
        const phone = document.getElementById('out-phone').innerText;
        const ramal = document.getElementById('out-ramal').innerText;
        const email = document.getElementById('out-email').innerText;
        
        // Caminho absoluto para a imagem de fundo (precisa ser uma URL pública para funcionar no e-mail)
        const bgUrl = window.location.origin + '/' + document.getElementById('in-bg').value;

        const htmlCode = `<!-- Início da Assinatura -->
<table cellpadding="0" cellspacing="0" border="0" style="width: 600px; font-family: Arial, sans-serif; background-color: #ffffff;">
    <tr>
        <td style="position: relative;">
            <img src="${bgUrl}" width="600" style="display: block; border: 0;" alt="Assinatura Shineray">
            <div style="position: absolute; top: 40%; left: 4%; width: 35%;">
                <div style="font-size: 16px; font-weight: bold; color: #000; text-transform: capitalize;">${name}</div>
                <div style="font-size: 11px; color: #C41219; margin-top: 2px;">${role}</div>
            </div>
            <div style="position: absolute; top: 22%; left: 50%; font-size: 10px; color: #444; line-height: 1.6;">
                <div style="margin-bottom: 8px;">${loc}</div>
                <div style="margin-bottom: 10px;">${phone}</div>
                <div style="margin-bottom: 8px;">${ramal}</div>
                <div>${email}</div>
            </div>
        </td>
    </tr>
</table>
<!-- Fim da Assinatura -->`;
        
        navigator.clipboard.writeText(htmlCode).then(() => {
            alert('Código HTML copiado! Lembre-se que para o HTML funcionar em e-mails externos, a imagem da moldura deve estar hospedada em um servidor público.');
        });
    }
</script>

<script>
function updateColorPreview(color) {
    document.getElementById('color-indicator').style.backgroundColor = color;
    document.getElementById('hex-text').innerText = color.toUpperCase();
}
</script>
<script>
    function mascaraCelular(input) {
    const prefixo = "Celular: ";
    let v = input.value;
    if (!v.startsWith(prefixo)) {
        v = prefixo + v.replace(prefixo, "");
    }

    let numeros = v.substring(prefixo.length).replace(/\D/g, "");


    if (numeros.length > 0) {
        numeros = numeros.replace(/^(\d{2})(\d)/g, "($1) $2");
    }
    if (numeros.length > 9) {
        numeros = numeros.replace(/(\d{5})(\d)/, "$1-$2");
    } else if (numeros.length > 5) {
        numeros = numeros.replace(/(\d{4})(\d)/, "$1-$2");
    }
    input.value = prefixo + numeros;
}

function mascaraTelefone(input) {
    const prefixo = "Telefone: ";
    let v = input.value;
    if (!v.startsWith(prefixo)) {
        v = prefixo + v.replace(prefixo, "");
    }

    let numeros = v.substring(prefixo.length).replace(/\D/g, "");


    if (numeros.length > 0) {
        numeros = numeros.replace(/^(\d{2})(\d)/g, "($1) $2");
    }
    if (numeros.length > 9) {
        numeros = numeros.replace(/(\d{5})(\d)/, "$1-$2");
    } else if (numeros.length > 5) {
        numeros = numeros.replace(/(\d{4})(\d)/, "$1-$2");
    }
    input.value = prefixo + numeros;
}

function mascaraRamal(input) {
    const prefixo = "Ramal: ";
    let v = input.value;

    if (!v.startsWith(prefixo)) {
        v = prefixo + v.replace(prefixo, "");
    }
    let numeros = v.substring(prefixo.length).replace(/\D/g, "");

    input.value = prefixo + numeros;
}


</script>
<script>
   function sugerirDominios(input) {
    const valor = input.value;
    const datalist = document.getElementById('email-options');
    const selectMoldura = document.getElementById('in-bg');
    
    const modeloNome = selectMoldura.options[selectMoldura.selectedIndex].text.toUpperCase();
    
    let dominioPadrao = "@gmail.com"; // fallback
    if (modeloNome.includes("BCI")) {
        dominioPadrao = "@grupobci.rec.br";
    } else if (modeloNome.includes("SHINERAY")) {
        dominioPadrao = "@shineraydobrasil.com.br";
    }

    const dominios = [dominioPadrao, "@outlook.com", "@outlook.com.br", "@gmail.com"];

    if (valor.includes('@')) {
        datalist.innerHTML = "";
        return;
    }

    datalist.innerHTML = "";
    if (valor.length > 0) {
        dominios.forEach(dom => {
            const option = document.createElement('option');
            option.value = valor + dom; // Ex: joao + @grupobci.re.br
            datalist.appendChild(option);
        });
    }
}

</script>
